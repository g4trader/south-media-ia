<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Dashboard Multicanal ‚Äî V√≠deo + Display (Footfall)</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net"/>
<script src="https://cdn.jsdelivr.net/npm/chart.js">
// ==== INSIGHTS LOGIC ====
(function(){
  // Separate channels
  const videoNames = ["YouTube","TikTok","Netflix","Disney","CTV"];
  const isVideo = (r)=> videoNames.includes((r["Canal"]||"").trim());
  const video = PER.filter(isVideo);
  const display = PER.filter(r => (r["Canal"]||"").toLowerCase().includes("footfall"));

  // Video Efficiency: scatter VTR(%) vs CPV (R$) ‚Äî invert x-axis meaning: lower CPV is better
  try {
    const ctx = document.getElementById('insVideoEff');
    if (ctx) {
      const data = {
        labels: video.map(r=>r["Canal"]),
        datasets: [{
          label: 'Canais de V√≠deo',
          data: video.map(r=>({x: Number(r["CPV (R$)"]||0), y: Number(r["VTR (100%)"]||0)*100})),
          pointRadius: 6
        }]
      };
      new Chart(ctx, {
        type: 'scatter',
        data,
        options: {
          plugins:{legend:{display:false}},
          scales:{
            x:{title:{display:true,text:'CPV (R$) ‚Äî menor √© melhor'}},
            y:{title:{display:true,text:'VTR100 (%) ‚Äî maior √© melhor'}, suggestedMax: 100}
          }
        }
      });
    }
  } catch(e){}

  // Footfall Conversion: bar of Custo/Visita por canal de display (se houver)
  try {
    const ctx = document.getElementById('insFootfall');
    if (ctx) {
      const disp = display.length ? display : PER.filter(r=>r["Custo/Visita (R$)"] !== "" && r["Custo/Visita (R$)"] != null);
      const labels = disp.map(r=>r["Canal"]);
      const data = disp.map(r=>Number(r["Custo/Visita (R$)"]||0));
      new Chart(ctx, {
        type: 'bar',
        data: { labels, datasets: [{label:'Custo/Visita (R$)', data}]},
        options: { plugins:{legend:{position:'bottom'}} }
      });
    }
  } catch(e){}

  // Pacing: Utilizado vs Contratado
  try {
    const ctx = document.getElementById('insPacing');
    if (ctx) {
      const contratado = Number(CONS["Budget Contratado (R$)"]||0);
      const utilizado = Number(CONS["Budget Utilizado (R$)"]||0);
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Pacing'],
          datasets: [
            { label: 'Contratado', data: [contratado] },
            { label: 'Utilizado', data: [utilizado] }
          ]
        },
        options: { plugins:{legend:{position:'bottom'}}, scales:{x:{stacked:true}, y:{stacked:true}} }
      });
    }
  } catch(e){}

  // Insights text
  try {
    const list = document.getElementById('insightsList');
    if (list) {
      // Best CPV among video
      const videoValid = video.filter(r => r["CPV (R$)"]!=="" && r["VTR (100%)"]!=="");
      const bestCPV = videoValid.reduce((acc,cur)=>{
        const v = Number(cur["CPV (R$)"]||Infinity);
        return (v < (acc.val||Infinity)) ? {name:cur["Canal"], val:v} : acc;
      }, {});
      const bestVTR = videoValid.reduce((acc,cur)=>{
        const v = Number(cur["VTR (100%)"]||0);
        return (v > (acc.val||-1)) ? {name:cur["Canal"], val:v} : acc;
      }, {});

      // Display Cost/Visit
      const dispAll = PER.filter(r=> r["Custo/Visita (R$)"]!=="" && r["Custo/Visita (R$)"]!=null);
      const avgCVis = dispAll.length ? dispAll.reduce((s,r)=>s+Number(r["Custo/Visita (R$)"]||0),0)/dispAll.length : 0;
      const ff = PER.find(r => (r["Canal"]||"").toLowerCase().includes("footfall"));
      const ffCVis = ff ? Number(ff["Custo/Visita (R$)"]||0) : null;

      // Pacing
      const contratado = Number(CONS["Budget Contratado (R$)"]||0);
      const utilizado = Number(CONS["Budget Utilizado (R$)"]||0);
      const pacing = contratado>0 ? (utilizado/contratado) : 0;

      const items = [];
      if (bestCPV.name) items.push(`üé• Melhor CPV em v√≠deo: <b>${bestCPV.name}</b> (R$ ${bestCPV.val.toFixed(2)}).`);
      if (bestVTR.name) items.push(`‚úÖ Maior VTR100: <b>${bestVTR.name}</b> (${(bestVTR.val*100).toFixed(1)}%).`);
      if (ff && ffCVis!=null) items.push(`üë£ Footfall Display com Custo/Visita de <b>R$ ${ffCVis.toFixed(2)}</b> (m√©dia display: R$ ${avgCVis.toFixed(2)}).`);
      items.push(`‚è±Ô∏è Pacing da campanha: <b>${(pacing*100).toFixed(1)}%</b> do contratado j√° foi utilizado.`);

      if (!items.length) items.push("Sem insights suficientes ‚Äî verifique se os dados de PER/CONS est√£o preenchidos.");
      list.innerHTML = items.map(t=>`<li>${t}</li>`).join("");
    }
  } catch(e){}
})();

</script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="">
// ==== INSIGHTS LOGIC ====
(function(){
  // Separate channels
  const videoNames = ["YouTube","TikTok","Netflix","Disney","CTV"];
  const isVideo = (r)=> videoNames.includes((r["Canal"]||"").trim());
  const video = PER.filter(isVideo);
  const display = PER.filter(r => (r["Canal"]||"").toLowerCase().includes("footfall"));

  // Video Efficiency: scatter VTR(%) vs CPV (R$) ‚Äî invert x-axis meaning: lower CPV is better
  try {
    const ctx = document.getElementById('insVideoEff');
    if (ctx) {
      const data = {
        labels: video.map(r=>r["Canal"]),
        datasets: [{
          label: 'Canais de V√≠deo',
          data: video.map(r=>({x: Number(r["CPV (R$)"]||0), y: Number(r["VTR (100%)"]||0)*100})),
          pointRadius: 6
        }]
      };
      new Chart(ctx, {
        type: 'scatter',
        data,
        options: {
          plugins:{legend:{display:false}},
          scales:{
            x:{title:{display:true,text:'CPV (R$) ‚Äî menor √© melhor'}},
            y:{title:{display:true,text:'VTR100 (%) ‚Äî maior √© melhor'}, suggestedMax: 100}
          }
        }
      });
    }
  } catch(e){}

  // Footfall Conversion: bar of Custo/Visita por canal de display (se houver)
  try {
    const ctx = document.getElementById('insFootfall');
    if (ctx) {
      const disp = display.length ? display : PER.filter(r=>r["Custo/Visita (R$)"] !== "" && r["Custo/Visita (R$)"] != null);
      const labels = disp.map(r=>r["Canal"]);
      const data = disp.map(r=>Number(r["Custo/Visita (R$)"]||0));
      new Chart(ctx, {
        type: 'bar',
        data: { labels, datasets: [{label:'Custo/Visita (R$)', data}]},
        options: { plugins:{legend:{position:'bottom'}} }
      });
    }
  } catch(e){}

  // Pacing: Utilizado vs Contratado
  try {
    const ctx = document.getElementById('insPacing');
    if (ctx) {
      const contratado = Number(CONS["Budget Contratado (R$)"]||0);
      const utilizado = Number(CONS["Budget Utilizado (R$)"]||0);
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Pacing'],
          datasets: [
            { label: 'Contratado', data: [contratado] },
            { label: 'Utilizado', data: [utilizado] }
          ]
        },
        options: { plugins:{legend:{position:'bottom'}}, scales:{x:{stacked:true}, y:{stacked:true}} }
      });
    }
  } catch(e){}

  // Insights text
  try {
    const list = document.getElementById('insightsList');
    if (list) {
      // Best CPV among video
      const videoValid = video.filter(r => r["CPV (R$)"]!=="" && r["VTR (100%)"]!=="");
      const bestCPV = videoValid.reduce((acc,cur)=>{
        const v = Number(cur["CPV (R$)"]||Infinity);
        return (v < (acc.val||Infinity)) ? {name:cur["Canal"], val:v} : acc;
      }, {});
      const bestVTR = videoValid.reduce((acc,cur)=>{
        const v = Number(cur["VTR (100%)"]||0);
        return (v > (acc.val||-1)) ? {name:cur["Canal"], val:v} : acc;
      }, {});

      // Display Cost/Visit
      const dispAll = PER.filter(r=> r["Custo/Visita (R$)"]!=="" && r["Custo/Visita (R$)"]!=null);
      const avgCVis = dispAll.length ? dispAll.reduce((s,r)=>s+Number(r["Custo/Visita (R$)"]||0),0)/dispAll.length : 0;
      const ff = PER.find(r => (r["Canal"]||"").toLowerCase().includes("footfall"));
      const ffCVis = ff ? Number(ff["Custo/Visita (R$)"]||0) : null;

      // Pacing
      const contratado = Number(CONS["Budget Contratado (R$)"]||0);
      const utilizado = Number(CONS["Budget Utilizado (R$)"]||0);
      const pacing = contratado>0 ? (utilizado/contratado) : 0;

      const items = [];
      if (bestCPV.name) items.push(`üé• Melhor CPV em v√≠deo: <b>${bestCPV.name}</b> (R$ ${bestCPV.val.toFixed(2)}).`);
      if (bestVTR.name) items.push(`‚úÖ Maior VTR100: <b>${bestVTR.name}</b> (${(bestVTR.val*100).toFixed(1)}%).`);
      if (ff && ffCVis!=null) items.push(`üë£ Footfall Display com Custo/Visita de <b>R$ ${ffCVis.toFixed(2)}</b> (m√©dia display: R$ ${avgCVis.toFixed(2)}).`);
      items.push(`‚è±Ô∏è Pacing da campanha: <b>${(pacing*100).toFixed(1)}%</b> do contratado j√° foi utilizado.`);

      if (!items.length) items.push("Sem insights suficientes ‚Äî verifique se os dados de PER/CONS est√£o preenchidos.");
      list.innerHTML = items.map(t=>`<li>${t}</li>`).join("");
    }
  } catch(e){}
})();

</script>
<style>
  :root{--bg:#0F1023;--bg2:#16213E;--panel:#1A1A2E;--muted:#9CA3AF;--stroke: rgba(139,92,246,.28);
         --grad: linear-gradient(135deg,#8B5CF6,#EC4899);}
  *{box-sizing:border-box;margin:0;padding:0}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#fff;
       background:linear-gradient(135deg,var(--bg) 0%,var(--bg2) 50%,var(--panel) 100%)}
  .container{max-width:1320px;margin:0 auto;padding:32px 32px 40px}
  .card{background:rgba(26,26,46,.8);border:1px solid var(--stroke);border-radius:14px;padding:20px;margin-bottom:24px;backdrop-filter:blur(8px)}
  .header{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:20px}
  .logo{display:flex;align-items:center;gap:12px}
  .logo-icon{width:40px;height:40px;border-radius:10px;background:var(--grad);display:grid;place-items:center;font-weight:700}
  .muted{color:var(--muted)}
  .tabs{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:20px 0}
  .tab{border:1px solid rgba(148,163,184,.2);background:rgba(255,255,255,.04);padding:10px;border-radius:10px;text-align:center;cursor:pointer;color:var(--muted);font-weight:600}
  .tab.active{background:var(--grad);color:#fff;box-shadow:0 8px 24px rgba(139,92,246,.35)}
  .hidden{display:none}
  .metrics{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
  @media(max-width:900px){.metrics{grid-template-columns:repeat(2,1fr)} .tabs{grid-template-columns:repeat(2,1fr)} }
  .metric{border:1px solid rgba(148,163,184,.18);border-radius:12px;padding:14px;display:flex;flex-direction:column;gap:6px}
  .metric .label{text-transform:uppercase;letter-spacing:.06em;color:var(--muted);font-size:.82rem}
  .metric .value{font-size:1.7rem;font-weight:800;line-height:1.15}
  .kpis{display:grid;grid-template-columns:1fr 1fr;gap:20px}
  @media(max-width:900px){.kpis{grid-template-columns:1fr}}
  table{width:100%;border-collapse:collapse}
  thead th{color:var(--muted);text-transform:uppercase;letter-spacing:.06em;font-size:.8rem;text-align:left;border-bottom:1px solid rgba(148,163,184,.22);padding:1rem}
  tbody td{padding:1rem;border-bottom:1px solid rgba(148,163,184,.14)}
  .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 12px;border-radius:999px;background:rgba(255,255,255,.08);border:1px solid rgba(148,163,184,.25);font-weight:600}
</style>
</head>
<body>
<div class="container">
  <div class="card header">
    <div class="logo">
      <div class="logo-icon">SM</div>
      <div>
        <div style="font-weight:800;font-size:1.1rem">South Media</div>
        <div class="muted">Dashboard Multicanal ‚Äî V√≠deo + Display (Footfall)</div>
      </div>
    </div>
    <div>
      <div style="font-weight:700;font-size:1rem;text-align:right">Campanha Multiplataforma</div>
      <div class="muted" style="text-align:right">Status: <span class="badge">EM ANDAMENTO</span></div>
    </div>
  </div>

  <div class="tabs">
    <div class="tab active" data-tab="overview">üé¨ Vis√£o Geral</div>
    <div class="tab" data-tab="channels">üß≠ Por Canal</div>
    <div class="tab" data-tab="insights">üìä An√°lise & Insights</div>
    <div class="tab" data-tab="planning">üìã Planejamento</div>
  </div>

  <!-- OVERVIEW -->
  <div id="tab-overview">
    <div class="metrics" id="metrics-overview-top"></div>
    <div class="kpis">
      <div class="card"><canvas id="chartSpendShare"></canvas></div>
      <div class="card"><canvas id="chartResults"></canvas></div>
    </div>
    <div class="card" style="margin-top:16px">
      <h3 style="margin-bottom:10px">Resumo por Canal</h3>
      <div class="muted" style="margin-bottom:10px">Valores contratados vs. realizados.</div>
      <div style="overflow:auto">
        <table id="tableChannels">
          <thead>
            <tr>
              <th>Canal</th><th>Budget Contratado (R$)</th><th>Budget Utilizado (R$)</th><th>Pacing (%)</th>
              <th>Impress√µes</th><th>Cliques</th><th>CTR</th><th>VC (100%)</th><th>VTR (100%)</th>
              <th>CPV (R$)</th><th>CPM (R$)</th><th>Visitas</th><th>Custo/Visita (R$)</th>
            </tr>
          </thead>
          <tbody id="tbodyChannels"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- CHANNELS -->
  <div id="tab-channels" class="hidden">
    <div class="card" style="margin-bottom:12px">
      <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;">
        <div style="font-weight:800">Selecione o canal:</div>
        <select id="channelSelect" style="padding:8px 10px;border-radius:8px;border:1px solid rgba(148,163,184,.25);background:rgba(255,255,255,.06);color:#fff"></select>
      </div>
    </div>
    <div class="metrics" id="metrics-channel"></div>

    <div class="card" style="margin-top:16px">
      <h3 style="margin-bottom:10px">Entrega di√°ria ‚Äî <span id="channelNameSpan">‚Äî</span></h3>
      <div style="overflow:auto">
        <table id="channelDailyTable">
          <thead>
            <tr>
              <th>Data</th><th>Criativo</th><th>Investimento (R$)</th>
              <th>Starts</th><th>25%</th><th>50%</th><th>75%</th><th>100%</th>
              <th>Impress√µes</th><th>Cliques</th><th>Visitas</th>
            </tr>
          </thead>
          <tbody id="channelDailyBody"></tbody>
        </table>
      </div>
    </div>

    <div id="footfallExtras" class="hidden">
      <div class="card" style="margin-top:16px">
        <h3 style="margin-bottom:10px">Sites utilizados (Display)</h3>
        <ul style="columns:2; gap:24px; margin-left:18px">
          <li>g1.globo.com</li><li>ge.globo.com</li><li>climatempo.com.br</li><li>epocanegocios.globo.com</li><li>vogue.globo.com</li><li>natelinha.uol.com.br</li><li>f5.folha.uol.com.br</li><li>veja.abril.com.br</li><li>terrabrasilnoticias.com</li><li>diariodonordeste.verdesmares.com.br/</li><li>revistagalileu.globo.com</li><li>https://www.dailymotion.com/br</li><li>r7.com</li><li>casavogue.globo.com</li>
        </ul>
      </div>
      <div class="card" style="margin-top:16px">
        <h3 style="margin-bottom:10px">Mapa de Footfall</h3>
        <div id="footfallMap" style="height:420px;border-radius:12px;overflow:hidden;border:1px solid rgba(148,163,184,.25)"></div>
      </div>
    </div>
  </div>

  
  <!-- INSIGHTS -->
  <div id="tab-insights" class="hidden">
    <div class="card" style="margin-bottom:16px">
      <h3 style="margin-bottom:8px">Efici√™ncia de V√≠deo ‚Äî VTR √ó CPV</h3>
      <div class="muted" style="margin-bottom:8px">Comparativo entre canais de v√≠deo (maior VTR e menor CPV s√£o melhores).</div>
      <canvas id="insVideoEff"></canvas>
    </div>

    <div class="card" style="margin-bottom:16px">
      <h3 style="margin-bottom:8px">Convers√£o de Display ‚Äî Custo por Visita</h3>
      <div class="muted" style="margin-bottom:8px">Efici√™ncia de Display considerando visitas footfall.</div>
      <canvas id="insFootfall"></canvas>
    </div>

    <div class="card" style="margin-bottom:16px">
      <h3 style="margin-bottom:8px">Pacing da Campanha</h3>
      <div class="muted" style="margin-bottom:8px">Or√ßamento Utilizado vs Contratado (quanto j√° foi gasto).</div>
      <canvas id="insPacing"></canvas>
    </div>

    <div class="card" id="insightsCards">
      <h3 style="margin-bottom:8px">Resumo de Insights</h3>
      <ul id="insightsList" style="margin-left:18px;line-height:1.75"></ul>
    </div>
  </div>

  <!-- PLANEJAMENTO -->

  <div id="tab-planning" class="hidden">
    <div class="card">
      <h3 style="margin-bottom:10px">Pacing ‚Äî Contratado vs Utilizado</h3>
      <div class="kpis">
        <div><canvas id="chartPacing"></canvas></div>
        <div><canvas id="chartVideoVsFootfall"></canvas></div>
      </div>
    </div>
  </div>
</div>

<script>
const CONS = {"Budget Contratado (R$)": 101403.5, "Budget Utilizado (R$)": 29008.23, "Impress√µes": 658113.0, "Cliques": 16593.0, "CTR (cons.)": 0.0252, "VC (100%)": 146932.0, "VTR (cons.)": 0.3523, "CPM (R$) cons.": 44.08, "CPV (R$) cons.": 0.2, "Visitas (Footfall)": 0.0, "Custo/Visita (R$) cons.": NaN};
const PER = [{"Canal": "CTV", "Budget Contratado (R$)": 11895.55, "Budget Utilizado (R$)": 2943.6, "Impress√µes": 0.0, "Cliques": 0.0, "CTR": "", "VC (100%)": 14718.0, "VTR (100%)": 0.8329, "CPV (R$)": 0.2, "CPM (R$)": "", "Visitas (Footfall)": 0.0, "Custo/Visita (R$)": "", "Pacing (%)": 0.2475}, {"Canal": "Disney", "Budget Contratado (R$)": 23145.0, "Budget Utilizado (R$)": 7270.76, "Impress√µes": 0.0, "Cliques": 0.0, "CTR": "", "VC (100%)": 15806.0, "VTR (100%)": 0.9777, "CPV (R$)": 0.46, "CPM (R$)": "", "Visitas (Footfall)": 0.0, "Custo/Visita (R$)": "", "Pacing (%)": 0.3141}, {"Canal": "Footfall Display", "Budget Contratado (R$)": 10229.36, "Budget Utilizado (R$)": 3679.4, "Impress√µes": 193649.0, "Cliques": 3390.0, "CTR": 0.0175, "VC (100%)": 0.0, "VTR (100%)": "", "CPV (R$)": "", "CPM (R$)": 19.0, "Visitas (Footfall)": 0.0, "Custo/Visita (R$)": "", "Pacing (%)": 0.3597}, {"Canal": "Netflix", "Budget Contratado (R$)": 23145.0, "Budget Utilizado (R$)": 5018.64, "Impress√µes": 0.0, "Cliques": 0.0, "CTR": "", "VC (100%)": 15208.0, "VTR (100%)": 0.9653, "CPV (R$)": 0.33, "CPM (R$)": "", "Visitas (Footfall)": 0.0, "Custo/Visita (R$)": "", "Pacing (%)": 0.2168}, {"Canal": "TikTok", "Budget Contratado (R$)": 13655.27, "Budget Utilizado (R$)": 7059.83, "Impress√µes": 464464.0, "Cliques": 13203.0, "CTR": 0.0284, "VC (100%)": 0.0, "VTR (100%)": "", "CPV (R$)": "", "CPM (R$)": 15.2, "Visitas (Footfall)": 0.0, "Custo/Visita (R$)": "", "Pacing (%)": 0.517}, {"Canal": "YouTube", "Budget Contratado (R$)": 19333.32, "Budget Utilizado (R$)": 3036.0, "Impress√µes": 0.0, "Cliques": 0.0, "CTR": "", "VC (100%)": 101200.0, "VTR (100%)": 0.2754, "CPV (R$)": 0.03, "CPM (R$)": "", "Visitas (Footfall)": 0.0, "Custo/Visita (R$)": "", "Pacing (%)": 0.157}];
const DAILY = [{"date": "01/09/2025", "channel": "CTV", "creative": "Sonho 15s", "spend": 171.8, "starts": 891.0, "q25": 889.0, "q50": 871.0, "q75": 864.0, "q100": 859.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "01/09/2025", "channel": "CTV", "creative": "Sonhos - 30s", "spend": 315.6, "starts": 1711.0, "q25": 1671.0, "q50": 1628.0, "q75": 1619.0, "q100": 1578.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "02/09/2025", "channel": "CTV", "creative": "Sonho 15s", "spend": 256.2, "starts": 1671.0, "q25": 1561.0, "q50": 1461.0, "q75": 1431.0, "q100": 1281.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "02/09/2025", "channel": "CTV", "creative": "Sonhos - 30s", "spend": 268.2, "starts": 1561.0, "q25": 1549.0, "q50": 1539.0, "q75": 1437.0, "q100": 1341.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "03/09/2025", "channel": "CTV", "creative": "Sonho 15s", "spend": 154.6, "starts": 844.0, "q25": 839.0, "q50": 821.0, "q75": 817.0, "q100": 773.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "03/09/2025", "channel": "CTV", "creative": "Sonhos - 30s", "spend": 335.6, "starts": 1711.0, "q25": 1701.0, "q50": 1695.0, "q75": 1687.0, "q100": 1678.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "04/09/2025", "channel": "CTV", "creative": "Sonho 15s", "spend": 83.8, "starts": 771.0, "q25": 758.0, "q50": 548.0, "q75": 451.0, "q100": 419.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "04/09/2025", "channel": "CTV", "creative": "Sonhos - 30s", "spend": 123.8, "starts": 672.0, "q25": 659.0, "q50": 642.0, "q75": 638.0, "q100": 619.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "05/09/2025", "channel": "CTV", "creative": "Sonho 15s", "spend": 222.2, "starts": 1671.0, "q25": 1566.0, "q50": 1461.0, "q75": 1321.0, "q100": 1111.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "05/09/2025", "channel": "CTV", "creative": "Sonhos - 30s", "spend": 89.8, "starts": 899.0, "q25": 883.0, "q50": 674.0, "q75": 566.0, "q100": 449.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "06/09/2025", "channel": "CTV", "creative": "Sonho 15s", "spend": 366.2, "starts": 1888.0, "q25": 1876.0, "q50": 1856.0, "q75": 1843.0, "q100": 1831.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "06/09/2025", "channel": "CTV", "creative": "Sonhos - 30s", "spend": 134.2, "starts": 991.0, "q25": 966.0, "q50": 951.0, "q75": 733.0, "q100": 671.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "07/09/2025", "channel": "CTV", "creative": "Sonho 15s", "spend": 221.4, "starts": 1298.0, "q25": 1239.0, "q50": 1219.0, "q75": 1201.0, "q100": 1107.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "07/09/2025", "channel": "CTV", "creative": "Sonhos - 30s", "spend": 200.2, "starts": 1091.0, "q25": 1078.0, "q50": 1067.0, "q75": 1063.0, "q100": 1001.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "01/09/2025", "channel": "Disney", "creative": "Sonho 30s", "spend": 388.7, "starts": 893.0, "q25": 861.0, "q50": 859.0, "q75": 855.0, "q100": 845.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "02/09/2025", "channel": "Disney", "creative": "Sonho 30s", "spend": 321.54, "starts": 741.0, "q25": 740.0, "q50": 729.0, "q75": 718.0, "q100": 699.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "03/09/2025", "channel": "Disney", "creative": "Sonho 30s", "spend": 1353.78, "starts": 2991.0, "q25": 2988.0, "q50": 2963.0, "q75": 2956.0, "q100": 2943.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "04/09/2025", "channel": "Disney", "creative": "Sonho 30s", "spend": 1309.62, "starts": 2891.0, "q25": 2856.0, "q50": 2853.0, "q75": 2851.0, "q100": 2847.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "05/09/2025", "channel": "Disney", "creative": "Sonho 30s", "spend": 1786.64, "starts": 3981.0, "q25": 3967.0, "q50": 3957.0, "q75": 3941.0, "q100": 3884.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "06/09/2025", "channel": "Disney", "creative": "Sonho 30s", "spend": 790.74, "starts": 1771.0, "q25": 1761.0, "q50": 1744.0, "q75": 1735.0, "q100": 1719.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "07/09/2025", "channel": "Disney", "creative": "Sonho 30s", "spend": 1319.74, "starts": 2899.0, "q25": 2879.0, "q50": 2873.0, "q75": 2871.0, "q100": 2869.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "30/08/2025", "channel": "Footfall Display", "creative": "180x150 -cta 2", "spend": 14.88, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 783.0, "clicks": 12.0, "visits": ""}, {"date": "30/08/2025", "channel": "Footfall Display", "creative": "250X250", "spend": 37.66, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1982.0, "clicks": 28.0, "visits": ""}, {"date": "31/08/2025", "channel": "Footfall Display", "creative": "180x150 -cta 2", "spend": 67.47, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 3551.0, "clicks": 23.0, "visits": ""}, {"date": "31/08/2025", "channel": "Footfall Display", "creative": "180x150-cta2", "spend": 46.57, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2451.0, "clicks": 12.0, "visits": ""}, {"date": "01/09/2025", "channel": "Footfall Display", "creative": "970x90", "spend": 25.5, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1342.0, "clicks": 21.0, "visits": ""}, {"date": "01/09/2025", "channel": "Footfall Display", "creative": "180x150-cta2", "spend": 52.78, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2778.0, "clicks": 2.0, "visits": ""}, {"date": "02/09/2025", "channel": "Footfall Display", "creative": "250x250", "spend": 48.66, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2561.0, "clicks": 152.0, "visits": ""}, {"date": "02/09/2025", "channel": "Footfall Display", "creative": "336x280", "spend": 44.48, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2341.0, "clicks": 12.0, "visits": ""}, {"date": "02/09/2025", "channel": "Footfall Display", "creative": "468x60", "spend": 65.57, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 3451.0, "clicks": 7.0, "visits": ""}, {"date": "02/09/2025", "channel": "Footfall Display", "creative": "728x90", "spend": 44.29, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2331.0, "clicks": 8.0, "visits": ""}, {"date": "03/09/2025", "channel": "Footfall Display", "creative": "180x150-cta2", "spend": 19.02, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1001.0, "clicks": 10.0, "visits": ""}, {"date": "03/09/2025", "channel": "Footfall Display", "creative": "250x250", "spend": 69.75, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 3671.0, "clicks": 261.0, "visits": ""}, {"date": "03/09/2025", "channel": "Footfall Display", "creative": "336x280", "spend": 52.88, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2783.0, "clicks": 257.0, "visits": ""}, {"date": "03/09/2025", "channel": "Footfall Display", "creative": "468x60", "spend": 50.86, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2677.0, "clicks": 0.0, "visits": ""}, {"date": "03/09/2025", "channel": "Footfall Display", "creative": "728x90", "spend": 16.97, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 893.0, "clicks": 0.0, "visits": ""}, {"date": "03/09/2025", "channel": "Footfall Display", "creative": "970X90", "spend": 12.79, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 673.0, "clicks": 0.0, "visits": ""}, {"date": "04/09/2025", "channel": "Footfall Display", "creative": "180x150 -cta 2", "spend": 40.3, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2121.0, "clicks": 14.0, "visits": ""}, {"date": "04/09/2025", "channel": "Footfall Display", "creative": "180x150-cta2", "spend": 35.78, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1883.0, "clicks": 1.0, "visits": ""}, {"date": "04/09/2025", "channel": "Footfall Display", "creative": "250x250", "spend": 20.43, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1075.0, "clicks": 35.0, "visits": ""}, {"date": "04/09/2025", "channel": "Footfall Display", "creative": "336x280", "spend": 22.17, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1167.0, "clicks": 21.0, "visits": ""}, {"date": "04/09/2025", "channel": "Footfall Display", "creative": "468x60", "spend": 46.65, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2455.0, "clicks": 31.0, "visits": ""}, {"date": "04/09/2025", "channel": "Footfall Display", "creative": "728x90", "spend": 12.98, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 683.0, "clicks": 18.0, "visits": ""}, {"date": "04/09/2025", "channel": "Footfall Display", "creative": "970x90", "spend": 17.58, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 925.0, "clicks": 12.0, "visits": ""}, {"date": "05/09/2025", "channel": "Footfall Display", "creative": "250x250", "spend": 57.23, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 3012.0, "clicks": 132.0, "visits": ""}, {"date": "05/09/2025", "channel": "Footfall Display", "creative": "336x280", "spend": 33.88, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1783.0, "clicks": 12.0, "visits": ""}, {"date": "05/09/2025", "channel": "Footfall Display", "creative": "468x60", "spend": 46.65, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2455.0, "clicks": 13.0, "visits": ""}, {"date": "05/09/2025", "channel": "Footfall Display", "creative": "728x90", "spend": 10.72, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 564.0, "clicks": 45.0, "visits": ""}, {"date": "05/09/2025", "channel": "Footfall Display", "creative": "970x90", "spend": 17.58, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 925.0, "clicks": 1.0, "visits": ""}, {"date": "05/09/2025", "channel": "Footfall Display", "creative": "180x150 -cta 2", "spend": 28.48, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1499.0, "clicks": 0.0, "visits": ""}, {"date": "05/09/2025", "channel": "Footfall Display", "creative": "180x150-cta2", "spend": 28.8, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1516.0, "clicks": 3.0, "visits": ""}, {"date": "06/09/2025", "channel": "Footfall Display", "creative": "250x250", "spend": 359.69, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 18931.0, "clicks": 454.0, "visits": ""}, {"date": "06/09/2025", "channel": "Footfall Display", "creative": "336x280", "spend": 186.79, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 9831.0, "clicks": 377.0, "visits": ""}, {"date": "06/09/2025", "channel": "Footfall Display", "creative": "468x60", "spend": 33.86, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1782.0, "clicks": 23.0, "visits": ""}, {"date": "06/09/2025", "channel": "Footfall Display", "creative": "728x90", "spend": 20.01, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1053.0, "clicks": 0.0, "visits": ""}, {"date": "06/09/2025", "channel": "Footfall Display", "creative": "970x90", "spend": 25.9, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1363.0, "clicks": 0.0, "visits": ""}, {"date": "07/09/2025", "channel": "Footfall Display", "creative": "250x250", "spend": 405.06, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 21319.0, "clicks": 564.0, "visits": ""}, {"date": "07/09/2025", "channel": "Footfall Display", "creative": "336x280", "spend": 1484.3, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 78121.0, "clicks": 541.0, "visits": ""}, {"date": "07/09/2025", "channel": "Footfall Display", "creative": "468x60", "spend": 16.74, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 881.0, "clicks": 23.0, "visits": ""}, {"date": "07/09/2025", "channel": "Footfall Display", "creative": "728x90", "spend": 14.88, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 783.0, "clicks": 133.0, "visits": ""}, {"date": "07/09/2025", "channel": "Footfall Display", "creative": "970x90", "spend": 42.81, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2253.0, "clicks": 132.0, "visits": ""}, {"date": "01/09/2025", "channel": "Netflix", "creative": "Sonho 30s", "spend": 117.81, "starts": 369.0, "q25": 367.0, "q50": 364.0, "q75": 361.0, "q100": 357.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "02/09/2025", "channel": "Netflix", "creative": "Sonho 30s", "spend": 270.27, "starts": 842.0, "q25": 838.0, "q50": 829.0, "q75": 827.0, "q100": 819.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "03/09/2025", "channel": "Netflix", "creative": "Sonho 30s", "spend": 597.96, "starts": 1821.0, "q25": 1819.0, "q50": 1814.0, "q75": 1813.0, "q100": 1812.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "04/09/2025", "channel": "Netflix", "creative": "Sonho 30s", "spend": 636.9, "starts": 1954.0, "q25": 1942.0, "q50": 1943.0, "q75": 1939.0, "q100": 1930.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "05/09/2025", "channel": "Netflix", "creative": "Sonho 30s", "spend": 732.27, "starts": 2321.0, "q25": 2270.0, "q50": 2242.0, "q75": 2224.0, "q100": 2219.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "06/09/2025", "channel": "Netflix", "creative": "Sonho 30s", "spend": 1379.4, "starts": 4357.0, "q25": 4241.0, "q50": 4220.0, "q75": 4189.0, "q100": 4180.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "07/09/2025", "channel": "Netflix", "creative": "Sonho 30s", "spend": 1284.03, "starts": 4091.0, "q25": 4089.0, "q50": 4002.0, "q75": 3994.0, "q100": 3891.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "01/09/2025", "channel": "TikTok", "creative": "Sonho 15 segundos", "spend": 89.94, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 5917.0, "clicks": 5.0, "visits": ""}, {"date": "01/09/2025", "channel": "TikTok", "creative": "sonho 15s", "spend": 76.62, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 5041.0, "clicks": 1.0, "visits": ""}, {"date": "01/09/2025", "channel": "TikTok", "creative": "sonho 30s", "spend": 35.28, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2321.0, "clicks": 1.0, "visits": ""}, {"date": "01/09/2025", "channel": "TikTok", "creative": "Sonho 30 segundos", "spend": 27.69, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 1822.0, "clicks": 1.0, "visits": ""}, {"date": "02/09/2025", "channel": "TikTok", "creative": "Sonho 15 segundos", "spend": 176.52, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 11613.0, "clicks": 11.0, "visits": ""}, {"date": "02/09/2025", "channel": "TikTok", "creative": "Sonho 30 segundos", "spend": 33.26, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2188.0, "clicks": 3.0, "visits": ""}, {"date": "03/09/2025", "channel": "TikTok", "creative": "Sonho 15 segundos", "spend": 166.77, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 10972.0, "clicks": 89.0, "visits": ""}, {"date": "03/09/2025", "channel": "TikTok", "creative": "Sonho 30 segundos", "spend": 38.26, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 2517.0, "clicks": 3.0, "visits": ""}, {"date": "04/09/2025", "channel": "TikTok", "creative": "Sonho 15 segundos", "spend": 289.13, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 19022.0, "clicks": 176.0, "visits": ""}, {"date": "04/09/2025", "channel": "TikTok", "creative": "Sonho 30 segundos", "spend": 132.3, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 8704.0, "clicks": 8.0, "visits": ""}, {"date": "05/09/2025", "channel": "TikTok", "creative": "Sonho 15 segundos", "spend": 545.54, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 35891.0, "clicks": 1089.0, "visits": ""}, {"date": "05/09/2025", "channel": "TikTok", "creative": "Sonho 30 segundos", "spend": 864.76, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 56892.0, "clicks": 1808.0, "visits": ""}, {"date": "06/09/2025", "channel": "TikTok", "creative": "Sonho 15 segundos", "spend": 1100.34, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 72391.0, "clicks": 1983.0, "visits": ""}, {"date": "06/09/2025", "channel": "TikTok", "creative": "Sonho 30 segundos", "spend": 1191.54, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 78391.0, "clicks": 3021.0, "visits": ""}, {"date": "07/09/2025", "channel": "TikTok", "creative": "Sonho 15 segundos", "spend": 1100.34, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 72391.0, "clicks": 1983.0, "visits": ""}, {"date": "07/09/2025", "channel": "TikTok", "creative": "Sonho 30 segundos", "spend": 1191.54, "starts": "", "q25": "", "q50": "", "q75": "", "q100": "", "impressions": 78391.0, "clicks": 3021.0, "visits": ""}, {"date": "01/09/2025", "channel": "YouTube", "creative": "shorts", "spend": 46.89, "starts": 2093.0, "q25": 1831.0, "q50": 1734.0, "q75": 1637.0, "q100": 1563.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "01/09/2025", "channel": "YouTube", "creative": "15s", "spend": 17.13, "starts": 1821.0, "q25": 1717.0, "q50": 893.0, "q75": 573.0, "q100": 571.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "01/09/2025", "channel": "YouTube", "creative": "30s", "spend": 18.81, "starts": 2218.0, "q25": 1905.0, "q50": 1026.0, "q75": 723.0, "q100": 627.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "02/09/2025", "channel": "YouTube", "creative": "shorts", "spend": 123.06, "starts": 4773.0, "q25": 4601.0, "q50": 4566.0, "q75": 4332.0, "q100": 4102.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "02/09/2025", "channel": "YouTube", "creative": "15s", "spend": 80.22, "starts": 3891.0, "q25": 3743.0, "q50": 2889.0, "q75": 2783.0, "q100": 2674.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "02/09/2025", "channel": "YouTube", "creative": "30s", "spend": 51.51, "starts": 3369.0, "q25": 2706.0, "q50": 2055.0, "q75": 1812.0, "q100": 1717.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "03/09/2025", "channel": "YouTube", "creative": "shorts", "spend": 20.19, "starts": 1899.0, "q25": 1801.0, "q50": 1453.0, "q75": 893.0, "q100": 673.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "03/09/2025", "channel": "YouTube", "creative": "15s", "spend": 17.22, "starts": 3091.0, "q25": 2031.0, "q50": 788.0, "q75": 631.0, "q100": 574.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "03/09/2025", "channel": "YouTube", "creative": "30s", "spend": 121.86, "starts": 5183.0, "q25": 4978.0, "q50": 4400.0, "q75": 4161.0, "q100": 4062.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "04/09/2025", "channel": "YouTube", "creative": "shorts", "spend": 57.06, "starts": 8901.0, "q25": 6821.0, "q50": 5661.0, "q75": 3899.0, "q100": 1902.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "04/09/2025", "channel": "YouTube", "creative": "15s", "spend": 1.68, "starts": 655.0, "q25": 391.0, "q50": 290.0, "q75": 103.0, "q100": 56.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "04/09/2025", "channel": "YouTube", "creative": "30s", "spend": 53.49, "starts": 12559.0, "q25": 8901.0, "q50": 5684.0, "q75": 2894.0, "q100": 1783.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "05/09/2025", "channel": "YouTube", "creative": "shorts", "spend": 173.49, "starts": 20893.0, "q25": 15673.0, "q50": 10992.0, "q75": 8931.0, "q100": 5783.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "05/09/2025", "channel": "YouTube", "creative": "15s", "spend": 474.93, "starts": 34211.0, "q25": 28931.0, "q50": 20342.0, "q75": 17631.0, "q100": 15831.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "05/09/2025", "channel": "YouTube", "creative": "30s", "spend": 201.93, "starts": 42130.0, "q25": 28931.0, "q50": 12983.0, "q75": 10383.0, "q100": 6731.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "06/09/2025", "channel": "YouTube", "creative": "shorts", "spend": 16.8, "starts": 1099.0, "q25": 754.0, "q50": 627.0, "q75": 579.0, "q100": 560.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "06/09/2025", "channel": "YouTube", "creative": "15s", "spend": 201.93, "starts": 45261.0, "q25": 18391.0, "q50": 12331.0, "q75": 7831.0, "q100": 6731.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "06/09/2025", "channel": "YouTube", "creative": "30s", "spend": 346.89, "starts": 56318.0, "q25": 36271.0, "q50": 28930.0, "q75": 19831.0, "q100": 11563.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "07/09/2025", "channel": "YouTube", "creative": "shorts", "spend": 170.13, "starts": 11381.0, "q25": 10783.0, "q50": 9803.0, "q75": 7831.0, "q100": 5671.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "07/09/2025", "channel": "YouTube", "creative": "15s", "spend": 470.79, "starts": 37891.0, "q25": 30911.0, "q50": 20193.0, "q75": 19831.0, "q100": 15693.0, "impressions": "", "clicks": "", "visits": ""}, {"date": "07/09/2025", "channel": "YouTube", "creative": "30s", "spend": 369.99, "starts": 67893.0, "q25": 42310.0, "q50": 35631.0, "q75": 17622.0, "q100": 12333.0, "impressions": "", "clicks": "", "visits": ""}];
const FOOTFALL_POINTS = [{"lat": -8.09233930867147, "lon": -34.8847507746984, "name": "Recibom - Av. Eng. Domingos Ferreira, 306 - Pina", "users": 1740.0, "rate": 3.0}, {"lat": -8.13196914950721, "lon": -34.9069687730163, "name": "Recibom boa viagem - R. Bar√£o de Souza Le√£o, 767 - Boa Viagem, Recife - PE, 51030-300", "users": 1892.0, "rate": 7.0}, {"lat": -8.04591568467357, "lon": -34.9092152269836, "name": "Recibom - Torre - Rua Conde de Iraj√°, 632 - Torre, Recife - PE, 50710-310", "users": 211.0, "rate": 9.0}, {"lat": -8.047434924792, "lon": -34.9001621153442, "name": "Recibom - Gra√ßas - Av. Rui Barbosa, 551 - Gra√ßas, Recife - PE, 52011-040", "users": 548.0, "rate": 8.0}, {"lat": -8.02988247354862, "lon": -34.9066516730163, "name": "Recibom - Parnamirim - Estr. do Arraial, 2668 - Tamarineira, Recife - PE, 52051-380", "users": 555.0, "rate": 11.0}, {"lat": -8.11993224900449, "lon": -34.9009126846557, "name": "Recibom - Boa Viagem - R. Prof. Jo√£o Medeiros, 261 - Boa Viagem, Recife - PE, 51021-050", "users": 1020.0, "rate": 6.0}, {"lat": -8.14254391419425, "lon": -34.9081091134918, "name": "Recibom - Set√∫bal - R. Jo√£o Cardoso Aires, 407 - Boa Viagem, Recife - PE, 51130-300", "users": 1089.0, "rate": 5.0}, {"lat": -8.0281307802215, "lon": -34.9025068846557, "name": "Recibom - Encruzilhada - Av. Norte Miguel Arraes de Alencar, S/N - Encruzilhada, Recife - PE, 52041-005", "users": 4328.0, "rate": 11.0}, {"lat": -7.99956677243255, "lon": -34.8464921711639, "name": "Recibom - Olinda - Av. Carlos de Lima Cavalcante, 515 - Bultrins, Olinda - PE, 53030-260", "users": 5121.0, "rate": 12.0}, {"lat": -8.18360115521895, "lon": -34.919450028836, "name": "Recibom - Piedade - Av. Bernardo Vieira de Melo, 3454 - Piedade, Jaboat√£o dos Guararapes - PE, 54410-010", "users": 1212.0, "rate": 11.0}, {"lat": -8.18233405479681, "lon": -34.9200238558197, "name": "Recibom - Piedade -Av. Ayrton Senna da Silva, 2851 - Piedade, Jaboat√£o dos Guararapes - PE, 54410-400", "users": 1573.0, "rate": 14.0}, {"lat": -8.01836781970679, "lon": -34.9962135137705, "name": "Recibom - Timbi, Camaragibe - PE, 54765-290", "users": NaN, "rate": NaN}];

// Helpers
const fmtBR = (v, dec=2) => isNaN(v)||v===null||v==="" ? "‚Äî" :
  new Intl.NumberFormat('pt-BR',{minimumFractionDigits:dec, maximumFractionDigits:dec}).format(Number(v));
const fmtInt = v => isNaN(v)||v===null||v==="" ? "‚Äî" :
  new Intl.NumberFormat('pt-BR',{maximumFractionDigits:0}).format(Number(v));
const pct = v => (isNaN(v)||v===null||v==="") ? "‚Äî" : `${(Number(v)*100).toFixed(2)}%`;

// Tabs
document.querySelectorAll('.tab').forEach(t=>t.addEventListener('click',()=>{
  document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
  t.classList.add('active');
  const id = t.dataset.tab;
  ['overview','channels','insights','planning'].forEach(key=>{
    document.getElementById('tab-'+key).classList.toggle('hidden', key!==id);
  });
}));

// OVERVIEW
const topMetrics = [
  ["üí∞ Or√ßamento Contratado", `R$ ${fmtBR(CONS["Budget Contratado (R$)"])}`],
  ["üí∏ Or√ßamento Utilizado", `R$ ${fmtBR(CONS["Budget Utilizado (R$)"])}`],
  ["üé¨ Video Completions", fmtInt(CONS["VC (100%)"])],
  ["üë£ Visitas (Footfall)", fmtInt(CONS["Visitas (Footfall)"])]
];
document.getElementById('metrics-overview-top').innerHTML = topMetrics.map(
  m=>`<div class='metric'><div class='label'>${m[0]}</div><div class='value'>${m[1]}</div></div>`).join('');

// Overview table
const tbody = document.getElementById('tbodyChannels');
PER.forEach(r=>{
  tbody.insertAdjacentHTML('beforeend', `
    <tr>
      <td>${r["Canal"]||"‚Äî"}</td>
      <td>R$ ${fmtBR(r["Budget Contratado (R$)"])}</td>
      <td>R$ ${fmtBR(r["Budget Utilizado (R$)"])}</td>
      <td>${pct(r["Pacing (%)"])}</td>
      <td>${fmtInt(r["Impress√µes"])}</td>
      <td>${fmtInt(r["Cliques"])}</td>
      <td>${pct(r["CTR"])}</td>
      <td>${fmtInt(r["VC (100%)"])}</td>
      <td>${pct(r["VTR (100%)"])}</td>
      <td>R$ ${fmtBR(r["CPV (R$)"])}</td>
      <td>R$ ${fmtBR(r["CPM (R$)"])}</td>
      <td>${fmtInt(r["Visitas (Footfall)"])}</td>
      <td>R$ ${fmtBR(r["Custo/Visita (R$)"])}</td>
    </tr>`)
});

// Overview charts
const ctx1 = document.getElementById('chartSpendShare');
const ctx2 = document.getElementById('chartResults');
const spendData = PER.map(r=>Number(r["Budget Utilizado (R$)"]||0));
const labels = PER.map(r=>r["Canal"]);
new Chart(ctx1, {
  type:'doughnut',
  data:{labels, datasets:[{data:spendData}]},
  options:{plugins:{legend:{position:'bottom'}}}
});
const vc = PER.map(r=>Number(r["VC (100%)"]||0));
const visits = PER.map(r=>Number(r["Visitas (Footfall)"]||0));
new Chart(ctx2, {
  type:'bar',
  data:{labels, datasets:[
    {label:'VC (100%)', data:vc},
    {label:'Visitas', data:visits}
  ]},
  options:{responsive:true, plugins:{legend:{position:'bottom'}}}
});

// CHANNELS ‚Äî selector
const sel = document.getElementById('channelSelect');
PER.forEach(r=>{ const opt=document.createElement('option'); opt.value=r["Canal"]; opt.textContent=r["Canal"]; sel.appendChild(opt); });
const metricsChannel = document.getElementById('metrics-channel');
const channelNameSpan = document.getElementById('channelNameSpan');

function renderChannelDailyTable(name){
  const tbody = document.getElementById('channelDailyBody');
  tbody.innerHTML = "";
  const rows = DAILY.filter(r=> (r.channel||'').toLowerCase() === (name||'').toLowerCase())
                    .sort((a,b)=>{ // date desc
                      const pa = a.date.split('/').reverse().join('-');
                      const pb = b.date.split('/').reverse().join('-');
                      return pa<pb ? 1 : pa>pb ? -1 : 0;
                    });
  rows.forEach(r=>{
    tbody.insertAdjacentHTML('beforeend', `
      <tr>
        <td>${r.date||'‚Äî'}</td>
        <td>${r.creative||'‚Äî'}</td>
        <td>R$ ${fmtBR(r.spend)}</td>
        <td>${fmtInt(r.starts)}</td>
        <td>${fmtInt(r.q25)}</td>
        <td>${fmtInt(r.q50)}</td>
        <td>${fmtInt(r.q75)}</td>
        <td>${fmtInt(r.q100)}</td>
        <td>${fmtInt(r.impressions)}</td>
        <td>${fmtInt(r.clicks)}</td>
        <td>${fmtInt(r.visits)}</td>
      </tr>`);
  });
}

function ensureFootfallMap() {
  if (!document.getElementById('footfallMap')) return;
  if (!window._footfallMap) {
    window._footfallMap = L.map('footfallMap').setView([-8.05, -34.90], 11);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19}).addTo(window._footfallMap);
  }
  if (window._footfallLayer) { window._footfallMap.removeLayer(window._footfallLayer); }
  window._footfallLayer = L.layerGroup().addTo(window._footfallMap);
  const pts = FOOTFALL_POINTS || [];
  pts.forEach(p=>{
    if(p.lat==null || p.lon==null) return;
    const size = Math.max(6, Math.min(18, (p.users||0)/300));
    const circle = L.circleMarker([p.lat, p.lon], {
      radius: size, color: '#8B5CF6', fillColor: '#8B5CF6', fillOpacity: 0.35, weight: 1
    }).bindPopup(`<b>${p.name||'Local'}</b><br/>Footfall Users: ${p.users||'‚Äî'}<br/>Footfall Rate: ${p.rate!=null? p.rate+'%':'‚Äî'}`);
    circle.addTo(window._footfallLayer);
  });
  try {
    const markers = pts.filter(p=>p.lat!=null && p.lon!=null).map(p=>L.marker([p.lat,p.lon]));
    if(markers.length) {
      const group = L.featureGroup(markers);
      window._footfallMap.fitBounds(group.getBounds().pad(0.2));
    }
  } catch(e) {}
}

function renderChannel(name){
  const r = PER.find(x=> (x["Canal"]||'').toLowerCase()=== (name||'').toLowerCase()) || PER[0];
  const nm = r ? r['Canal'] : name;
  channelNameSpan.textContent = nm || '‚Äî';
  const items = [
    ['üìä Or√ßamento Contratado','R$ '+fmtBR(r['Budget Contratado (R$)'])],
    ['üí∏ Or√ßamento Utilizado','R$ '+fmtBR(r['Budget Utilizado (R$)'])],
    ['üéØ Pacing', pct(r['Pacing (%)'])],
    ['üé¨ VC (100%)', fmtInt(r['VC (100%)'])],
    ['üìâ VTR100', pct(r['VTR (100%)'])],
    ['üí∞ CPV','R$ '+fmtBR(r['CPV (R$)'])],
    ['üñ®Ô∏è Impress√µes', fmtInt(r['Impress√µes'])],
    ['üëÜ Cliques', fmtInt(r['Cliques'])],
    ['üìà CTR', pct(r['CTR'])],
    ['üë£ Visitas', fmtInt(r['Visitas (Footfall)'])]
  ];
  metricsChannel.innerHTML = items.map(m=>`<div class='metric'><div class='label'>${m[0]}</div><div class='value'>${m[1]}</div></div>`).join('');
  renderChannelDailyTable(nm);
  const showFF = (nm||'').toLowerCase()==='footfall display';
  const wrap = document.getElementById('footfallExtras');
  if(wrap) wrap.classList.toggle('hidden', !showFF);
  if(showFF) ensureFootfallMap();
}

sel.addEventListener('change', e=>renderChannel(e.target.value));
renderChannel(PER[0] && PER[0]['Canal'] ? PER[0]['Canal'] : '');

// ==== INSIGHTS LOGIC ====
(function(){
  // Separate channels
  const videoNames = ["YouTube","TikTok","Netflix","Disney","CTV"];
  const isVideo = (r)=> videoNames.includes((r["Canal"]||"").trim());
  const video = PER.filter(isVideo);
  const display = PER.filter(r => (r["Canal"]||"").toLowerCase().includes("footfall"));

  // Video Efficiency: scatter VTR(%) vs CPV (R$) ‚Äî invert x-axis meaning: lower CPV is better
  try {
    const ctx = document.getElementById('insVideoEff');
    if (ctx) {
      const data = {
        labels: video.map(r=>r["Canal"]),
        datasets: [{
          label: 'Canais de V√≠deo',
          data: video.map(r=>({x: Number(r["CPV (R$)"]||0), y: Number(r["VTR (100%)"]||0)*100})),
          pointRadius: 6
        }]
      };
      new Chart(ctx, {
        type: 'scatter',
        data,
        options: {
          plugins:{legend:{display:false}},
          scales:{
            x:{title:{display:true,text:'CPV (R$) ‚Äî menor √© melhor'}},
            y:{title:{display:true,text:'VTR100 (%) ‚Äî maior √© melhor'}, suggestedMax: 100}
          }
        }
      });
    }
  } catch(e){}

  // Footfall Conversion: bar of Custo/Visita por canal de display (se houver)
  try {
    const ctx = document.getElementById('insFootfall');
    if (ctx) {
      const disp = display.length ? display : PER.filter(r=>r["Custo/Visita (R$)"] !== "" && r["Custo/Visita (R$)"] != null);
      const labels = disp.map(r=>r["Canal"]);
      const data = disp.map(r=>Number(r["Custo/Visita (R$)"]||0));
      new Chart(ctx, {
        type: 'bar',
        data: { labels, datasets: [{label:'Custo/Visita (R$)', data}]},
        options: { plugins:{legend:{position:'bottom'}} }
      });
    }
  } catch(e){}

  // Pacing: Utilizado vs Contratado
  try {
    const ctx = document.getElementById('insPacing');
    if (ctx) {
      const contratado = Number(CONS["Budget Contratado (R$)"]||0);
      const utilizado = Number(CONS["Budget Utilizado (R$)"]||0);
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Pacing'],
          datasets: [
            { label: 'Contratado', data: [contratado] },
            { label: 'Utilizado', data: [utilizado] }
          ]
        },
        options: { plugins:{legend:{position:'bottom'}}, scales:{x:{stacked:true}, y:{stacked:true}} }
      });
    }
  } catch(e){}

  // Insights text
  try {
    const list = document.getElementById('insightsList');
    if (list) {
      // Best CPV among video
      const videoValid = video.filter(r => r["CPV (R$)"]!=="" && r["VTR (100%)"]!=="");
      const bestCPV = videoValid.reduce((acc,cur)=>{
        const v = Number(cur["CPV (R$)"]||Infinity);
        return (v < (acc.val||Infinity)) ? {name:cur["Canal"], val:v} : acc;
      }, {});
      const bestVTR = videoValid.reduce((acc,cur)=>{
        const v = Number(cur["VTR (100%)"]||0);
        return (v > (acc.val||-1)) ? {name:cur["Canal"], val:v} : acc;
      }, {});

      // Display Cost/Visit
      const dispAll = PER.filter(r=> r["Custo/Visita (R$)"]!=="" && r["Custo/Visita (R$)"]!=null);
      const avgCVis = dispAll.length ? dispAll.reduce((s,r)=>s+Number(r["Custo/Visita (R$)"]||0),0)/dispAll.length : 0;
      const ff = PER.find(r => (r["Canal"]||"").toLowerCase().includes("footfall"));
      const ffCVis = ff ? Number(ff["Custo/Visita (R$)"]||0) : null;

      // Pacing
      const contratado = Number(CONS["Budget Contratado (R$)"]||0);
      const utilizado = Number(CONS["Budget Utilizado (R$)"]||0);
      const pacing = contratado>0 ? (utilizado/contratado) : 0;

      const items = [];
      if (bestCPV.name) items.push(`üé• Melhor CPV em v√≠deo: <b>${bestCPV.name}</b> (R$ ${bestCPV.val.toFixed(2)}).`);
      if (bestVTR.name) items.push(`‚úÖ Maior VTR100: <b>${bestVTR.name}</b> (${(bestVTR.val*100).toFixed(1)}%).`);
      if (ff && ffCVis!=null) items.push(`üë£ Footfall Display com Custo/Visita de <b>R$ ${ffCVis.toFixed(2)}</b> (m√©dia display: R$ ${avgCVis.toFixed(2)}).`);
      items.push(`‚è±Ô∏è Pacing da campanha: <b>${(pacing*100).toFixed(1)}%</b> do contratado j√° foi utilizado.`);

      if (!items.length) items.push("Sem insights suficientes ‚Äî verifique se os dados de PER/CONS est√£o preenchidos.");
      list.innerHTML = items.map(t=>`<li>${t}</li>`).join("");
    }
  } catch(e){}
})();

</script>
</body>
</html>
